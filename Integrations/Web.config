<?xml version="1.0"?>
<configuration>
  <!-- 
  
        Following are queries to be run against V1
        For each query to be defined, we need to define the section name below,
        and then add the XML below (see existing for examples).
        For any dynamic variables (Release Date, Program Name, etc.), the 
        format is to replace those within the JSON query with %%PARAM%%, and then
        define an appsetting parameter with the same name as the query.
        
        For example, see v1getStories below.  It uses two dynamic variables, Release Date and Program.
        In the query, we substitute in %%REL_DATE%% and %%PROG_NAME%% as the values.
        We then define an appsetting key called "v1getStories" (same name as the XML node that contains the story query), 
        and we enter a comma delimited list of the parameters.
        
        The wrapper will expect those parameters to be passed in on the querystring (see below) and will perform a substitution.
        
        For example: <url>/versionOne.ashx?action=v1getStories&REL_DATE='2014-11-27'&PROG_NAME='Sample: Next Release'
        
        New Queries can be added by adding the appropriate section key in the configSection below, the appropriate XML node containing 
        the query command (with possible subsitution variables), and the appsettings key with substitutions.
        
  -->
  <configSections>
    <section name="v1getPrograms" type="System.Configuration.IgnoreSectionHandler" allowLocation="false" />
    <section name="v1getStories" type="System.Configuration.IgnoreSectionHandler" allowLocation="false" />
    <section name="v1getEpics" type="System.Configuration.IgnoreSectionHandler" allowLocation="false" />
  </configSections >
  <v1getPrograms>
    {
    "from": "ScopeLabel",
    "select": [
      "Name"],
    "where": {}
    }
  </v1getPrograms>
  
  <v1getStories>
    [{
    "from": "Story",
    "select": [
    "Super.Number",
    "Super.Name",
    "Name",
    "Description",
    "Number",
    "Custom_ReleaseDate"],
    "where": {
    "Super.Custom_ReleaseDate2": "%%REL_DATE%%",
    "Super.Scope.ScopeLabels.Name": "%%PROG_NAME%%"
    }
    },
    {
    "from": "Story",
    "select": [
    "Super.Number",
    "Super.Name",
    "Name",
    "Description",
    "Number",
    "Custom_ReleaseDate"],
    "where": {
    "Custom_ReleaseDate":"%%REL_DATE%%",
    "Scope.ScopeLabels.Name": "%%PROG_NAME%%"
    }
    }]
  </v1getStories>
  <v1getEpics>
    
    
  </v1getEpics>
    
  <appSettings>
    <!-- *************************************
              Version One Information      
         *************************************-->
    <!-- Version One base URL -->
    <add key="voURL" value="https://www14.v1host.com/Serena/"/>

    <add key="v1getStories" value="REL_DATE,PROG_NAME"/>

    
    <!-- Version One Select - defines the fields to retrieve in the queries -->
    <add key="voStorySelect" value="Super.Number,Super.Name,Name,Description,Number,Custom_ReleaseDate"/>
    <add key="voEpicSelect" value="Name,Description,Number,Custom_ReleaseDate2"/>
    <add key="voProgSelect" value="Name"/>
    <!-- Version One "Release Date" field name -->
    <add key="voStoryRelDate" value="Custom_ReleaseDate"/>
    <add key="voEpicRelDate" value="Custom_ReleaseDate2"/>

    <!--<add key="voProjSelect" value="Name,Parent"/>-->
    <!--<add key="voUID" value="slewarne@serena.com"/>
    <add key="voPWD" value="cGEkJHdvcmQ="/>-->
    
    
  </appSettings>
  <connectionStrings/>
  <!--
    For a description of web.config changes for .NET 4.5 see http://go.microsoft.com/fwlink/?LinkId=235367.

    The following attributes can be set on the <httpRuntime> tag.
      <system.Web>
        <httpRuntime targetFramework="4.5" />
      </system.Web>
  -->
  <system.web>
    <!-- 
            Visual Basic options:
            Set strict="true" to disallow all data type conversions 
            where data loss can occur. 
            Set explicit="true" to force declaration of all variables.
        -->
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.5"/>
    <!--
      The <authentication> section enables configuration 
      of the security authentication mode used by 
      ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows"/>
    <!--
       The <customErrors> section enables configuration 
       of what to do if/when an unhandled error occurs 
       during the execution of a request. Specifically, 
       it enables developers to configure html error pages 
       to be displayed in place of a error stack trace.

       <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
         <error statusCode="403" redirect="NoAccess.htm" />
         <error statusCode="404" redirect="FileNotFound.htm" />
       </customErrors>
    -->
    <pages controlRenderingCompatibilityVersion="4.0" clientIDMode="AutoID">
      <namespaces>
        <clear/>
        <add namespace="System"/>
        <add namespace="System.Collections"/>
        <add namespace="System.Collections.Generic"/>
        <add namespace="System.Collections.Specialized"/>
        <add namespace="System.Configuration"/>
        <add namespace="System.Text"/>
        <add namespace="System.Text.RegularExpressions"/>
        <add namespace="System.Linq"/>
        <add namespace="System.Xml.Linq"/>
        <add namespace="System.Web"/>
        <add namespace="System.Web.Caching"/>
        <add namespace="System.Web.SessionState"/>
        <add namespace="System.Web.Security"/>
        <add namespace="System.Web.Profile"/>
        <add namespace="System.Web.UI"/>
        <add namespace="System.Web.UI.WebControls"/>
        <add namespace="System.Web.UI.WebControls.WebParts"/>
        <add namespace="System.Web.UI.HtmlControls"/>
      </namespaces>
    </pages>
  </system.web>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0.  It is not necessary for previous version of IIS.
    -->
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>